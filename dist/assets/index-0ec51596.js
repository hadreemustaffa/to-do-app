(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=c(n);fetch(n.href,r)}})();let m;const w=new Uint8Array(16);function O(){if(!m&&(m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m(w)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function N(e,t=0){return s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]}const B=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),E={randomUUID:B};function F(e,t,c){if(E.randomUUID&&!t&&!e)return E.randomUUID();e=e||{};const o=e.random||(e.rng||O)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){c=c||0;for(let n=0;n<16;++n)t[c+n]=o[n];return t}return N(o)}const p=document.documentElement,R=document.getElementById("themeSelector"),P=document.querySelector("#clearTask"),S=document.querySelector("#createTask"),V=document.querySelector("form"),l=document.querySelector(".list"),M=document.querySelectorAll(".container:not(:first-child)"),g=document.querySelector(".logo"),b=document.querySelector("main"),d=document.querySelector(".filter"),$=document.querySelectorAll(".filter__btn"),T=document.querySelector(".control__task-count"),q=l.children,j=".list__item.task",k=".list__item.task.completed",f=".list__item.task:not(.completed)",u=()=>{const e=Array.from(q).map(t=>({id:t.querySelector("input").id,text:t.querySelector("p").textContent,completed:t.classList.contains("completed")}));localStorage.setItem("tasks",JSON.stringify(e))},J=()=>{const e=p.getAttribute("data-theme");localStorage.setItem("theme",e)},z=()=>{(JSON.parse(localStorage.getItem("tasks"))||[]).forEach(c=>{const o=I(c.text,c.id,c.completed);l.appendChild(o)}),y(),v();const t=localStorage.getItem("theme");t&&(p.setAttribute("data-theme",t),x(t))},D=()=>{const e=window.innerWidth>=760,t=d.parentElement===b;e?(d.classList.remove("container"),t&&T.insertAdjacentElement("afterend",d)):!e&&!t&&(b.appendChild(d),d.classList.add("container"))};D();window.addEventListener("resize",D);const x=e=>{e==="light"?(g.src="./icon-sun.svg",g.removeAttribute("style")):(g.src="./icon-moon.svg",g.style.transform="rotate(360deg)")},h=e=>{document.querySelectorAll(e).forEach(t=>{t.removeAttribute("style"),t.classList.remove("filtered")})},A=e=>{document.querySelectorAll(e).forEach(t=>{t.classList.add("filtered"),setTimeout(()=>{t.style.display="none"},350)})},C=e=>{e.id==="filterAll"?h(j):e.id==="filterActive"?(h(f),A(k)):e.id==="filterCompleted"&&(h(k),A(f))},H=e=>{var t;(t=document.querySelector(".selected"))==null||t.classList.remove("selected"),e.classList.add("selected"),C(e)};$.forEach(e=>{e.addEventListener("click",()=>{H(e)})});const v=()=>{const e=document.querySelectorAll(f).length;T.textContent=e>0?`${e} ${e===1?"item":"items"} left`:""},y=()=>{v(),M.forEach(e=>{q.length>0?e.style.display="flex":e.removeAttribute("style")})},_=(e,t)=>{t.classList.add("removing"),setTimeout(()=>{e.removeChild(t),u(),y()},350)},I=(e,t=F(),c=!1)=>{const o=document.createElement("li");o.classList.add("list__item","task"),c&&o.classList.add("completed"),o.setAttribute("draggable","true"),o.addEventListener("dragstart",()=>o.classList.add("dragging")),o.addEventListener("dragend",()=>o.classList.remove("dragging"));const n=document.createElement("label");n.setAttribute("for",t),n.classList.add("sr-only"),n.textContent="Check box to complete task";const r=document.createElement("input");r.type="checkbox",r.name="complete",r.id=t,r.classList.add("list__item-input"),r.checked=c,r.addEventListener("change",()=>{const U=document.querySelector(".selected");o.classList.toggle("completed"),u(),C(U),v()});const a=document.createElement("p");a.classList.add("list__item-text"),a.textContent=e;const i=document.createElement("button");i.type="button",i.ariaLabel="remove task",i.id=`remove-${t}`,i.classList.add("list__btn-remove"),i.addEventListener("click",()=>{_(l,o)});const L=document.createElement("img");return L.src="./icon-cross.svg",i.appendChild(L),o.append(n,r,a,i),o},K=()=>{const e=S.value.trim();if(e!==""){const t=I(e);l.appendChild(t),S.value="",u(),y()}};P.addEventListener("click",()=>{document.querySelectorAll(".completed").forEach(e=>{_(l,e)}),u()});V.addEventListener("submit",e=>{e.preventDefault(),K(),y()});R.addEventListener("click",()=>{const t=p.getAttribute("data-theme")==="light"?"dark":"light";p.setAttribute("data-theme",t),x(t),J()});const W=(e,t)=>[...e.querySelectorAll("li[draggable='true']:not(.dragging)")].find(o=>{const n=o.getBoundingClientRect();return t<n.top+n.height/2})||null,Y=e=>{e.target.classList.add("dragging")},G=e=>{e.target.classList.remove("dragging")},Q=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move";const t=l.querySelector(".dragging"),c=W(l,e.clientY);c===null?l.appendChild(t):l.insertBefore(t,c)},X=e=>{e.preventDefault(),u()},Z=()=>{l.querySelectorAll('li[draggable="true"]').forEach(t=>{t.addEventListener("dragstart",Y),t.addEventListener("dragend",G)}),l.addEventListener("dragover",Q),l.addEventListener("drop",X)};Z();document.addEventListener("DOMContentLoaded",z);
